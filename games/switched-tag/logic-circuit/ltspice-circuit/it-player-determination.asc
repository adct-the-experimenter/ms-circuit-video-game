Version 4
SHEET 1 4520 1248
WIRE 2544 144 2464 144
WIRE 2608 144 2544 144
WIRE 1280 160 1120 160
WIRE 2608 160 2608 144
WIRE 2656 160 2608 160
WIRE 2768 176 2720 176
WIRE 3168 176 2768 176
WIRE 3360 176 3168 176
WIRE 2656 192 2624 192
WIRE 3552 208 3520 208
WIRE 3696 208 3632 208
WIRE 592 224 448 224
WIRE 2544 224 2544 208
WIRE 2608 224 2544 224
WIRE 2624 224 2624 192
WIRE 2624 224 2608 224
WIRE 3360 224 3360 176
WIRE 1920 240 1872 240
WIRE 2096 240 2000 240
WIRE 3168 240 3168 176
WIRE 1120 272 1120 160
WIRE 1168 272 1120 272
WIRE 2464 272 2464 144
WIRE 2544 272 2544 224
WIRE 448 288 448 224
WIRE 480 288 448 288
WIRE 1280 288 1280 160
WIRE 1280 288 1232 288
WIRE 1328 288 1280 288
WIRE 3360 288 3360 272
WIRE 592 304 592 224
WIRE 592 304 544 304
WIRE 704 304 704 256
WIRE 704 304 592 304
WIRE 848 304 704 304
WIRE 992 304 928 304
WIRE 1168 304 992 304
WIRE 480 320 192 320
WIRE 3168 320 3168 304
WIRE 3168 320 3120 320
WIRE 3264 320 3168 320
WIRE 3360 320 3360 288
WIRE 3408 320 3360 320
WIRE 3520 320 3520 208
WIRE 3520 320 3488 320
WIRE 3584 320 3520 320
WIRE 3696 336 3696 208
WIRE 3696 336 3648 336
WIRE 3744 336 3696 336
WIRE 3168 352 3168 320
WIRE 3360 352 3360 320
WIRE 3584 352 3536 352
WIRE 848 368 848 304
WIRE 992 384 992 304
WIRE 3536 384 3536 352
WIRE 1680 400 1680 352
WIRE 1744 400 1680 400
WIRE 1872 400 1872 240
WIRE 1872 400 1824 400
WIRE 1952 400 1872 400
WIRE 2096 416 2096 240
WIRE 2096 416 2016 416
WIRE 2240 416 2240 352
WIRE 2240 416 2096 416
WIRE 2544 416 2544 352
WIRE 2544 416 2240 416
WIRE 1952 432 1936 432
WIRE 656 448 656 416
WIRE 800 448 656 448
WIRE 928 464 928 304
WIRE 928 464 848 464
WIRE 992 464 992 448
WIRE 3168 464 3168 432
WIRE 3264 464 3168 464
WIRE 3360 464 3360 432
WIRE 3360 464 3264 464
WIRE 3264 512 3264 464
WIRE 1744 528 1680 528
WIRE 1888 528 1824 528
WIRE 1936 528 1936 432
WIRE 1936 528 1888 528
WIRE 1888 560 1888 528
WIRE 1680 576 1680 528
WIRE 1264 608 1104 608
WIRE 576 672 432 672
WIRE 1104 720 1104 608
WIRE 1152 720 1104 720
WIRE 432 736 432 672
WIRE 464 736 432 736
WIRE 1264 736 1264 608
WIRE 1264 736 1216 736
WIRE 1312 736 1264 736
WIRE 576 752 576 672
WIRE 576 752 528 752
WIRE 688 752 688 704
WIRE 688 752 576 752
WIRE 832 752 688 752
WIRE 976 752 912 752
WIRE 1152 752 976 752
WIRE 464 768 176 768
WIRE 832 816 832 752
WIRE 976 832 976 752
WIRE 640 896 640 864
WIRE 784 896 640 896
WIRE 912 912 912 752
WIRE 912 912 832 912
WIRE 976 912 976 896
FLAG -416 352 0
FLAG -608 272 VCC
FLAG -608 352 0
FLAG -416 272 VEE
FLAG -656 720 0
FLAG -656 640 pendelum
FLAG -512 1136 0
FLAG -512 1056 P1_button_it
FLAG 1200 256 VCC
FLAG 1200 320 VEE
FLAG 1328 288 P1_it_val
FLAG 992 464 0
FLAG 704 256 pend_buffer1
FLAG 512 272 VCC
FLAG 512 336 VEE
FLAG 656 416 P1_button_it
FLAG 192 320 pendelum
FLAG 1184 704 VCC
FLAG 1184 768 VEE
FLAG 1312 736 P2_it_val
FLAG 976 912 0
FLAG 688 704 pend_buffer2
FLAG 496 720 VCC
FLAG 496 784 VEE
FLAG 640 864 P2_button_it
FLAG 176 768 pendelum
FLAG -256 1136 0
FLAG -256 1056 P2_button_it
FLAG 1984 384 VCC
FLAG 1984 448 VEE
FLAG 1888 640 0
FLAG 2240 352 diff
FLAG 1680 352 P1_it_val
FLAG 1680 576 P2_it_val
FLAG 2464 352 0
FLAG 2688 144 VCC
FLAG 2768 176 dir_detect
FLAG 2688 208 VEE
FLAG 3120 320 P2_it
FLAG 3264 512 0
FLAG 3616 304 VCC
FLAG 3616 368 VEE
FLAG 3536 384 0
FLAG 3744 336 P1_it
DATAFLAG 848 352 ""
DATAFLAG 768 448 ""
DATAFLAG 832 800 ""
DATAFLAG 752 896 ""
SYMBOL voltage -416 256 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value -5
SYMBOL voltage -608 256 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage -656 624 R0
WINDOW 0 21 20 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value2 AC 1
SYMATTR Value SINE(2.5 2.5 100)
SYMBOL voltage -512 1040 R0
WINDOW 0 21 20 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value2 AC 1
SYMATTR Value PULSE(0 5 0.5 0.1 0.1 1)
SYMBOL Opamps\\UniversalOpamp2 1200 288 R0
SYMATTR InstName U1
SYMBOL cap 976 384 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL nmos 800 368 R0
SYMATTR InstName M1
SYMATTR Value RSJ400N10
SYMBOL Opamps\\UniversalOpamp2 512 304 R0
SYMATTR InstName U2
SYMBOL Opamps\\UniversalOpamp2 1184 736 R0
SYMATTR InstName U3
SYMBOL cap 960 832 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL nmos 784 816 R0
SYMATTR InstName M2
SYMATTR Value RSJ400N10
SYMBOL Opamps\\UniversalOpamp2 496 752 R0
SYMATTR InstName U4
SYMBOL voltage -256 1040 R0
WINDOW 0 21 20 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value2 AC 1
SYMATTR Value PULSE(0 5 1 0.1 0.1 1)
SYMBOL Opamps\\UniversalOpamp2 1984 416 R0
SYMATTR InstName U5
SYMBOL res 2016 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 1872 544 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 1840 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 1840 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL Opamps\\UniversalOpamp2 2688 176 R0
SYMATTR InstName U6
SYMBOL res 2528 256 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 2448 256 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL diode 2528 144 R0
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL diode 2624 224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N914
SYMBOL diode 3152 240 R0
SYMATTR InstName D3
SYMATTR Value 1N914
SYMBOL res 3152 336 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL diode 3376 288 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N914
SYMBOL res 3344 336 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL Opamps\\UniversalOpamp2 3616 336 R0
SYMATTR InstName U7
SYMBOL res 3648 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 3504 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
TEXT 0 16 Left 2 ;Circuit to determine which player is It.
TEXT -448 504 Left 2 !.tran 0 2s 0 10us
TEXT -432 424 Left 2 !;ac dec 10 1 1G
TEXT -312 560 Left 2 !.op
TEXT -624 1232 Left 2 ;Sample at 5V, hold at 0V
TEXT 800 224 Left 2 ;Sample/hold control
TEXT 784 672 Left 2 ;Sample/hold control
TEXT 784 48 Left 2 ;Sample Input from Players
TEXT 1680 -88 Left 2 ;Compare difference from low-point of pendelum (5 V)
TEXT 1784 -48 Left 2 ;difference between player 1 and player 2.
TEXT 1392 48 Left 2 ;Order matters in subtraction here. Negative means player 1 has higher value, positive means player 2 has higher value.
TEXT 1536 0 Left 2 ;Whichever player has highest  value in magnitude is closest to low-point of pendelum and is it.
TEXT 3152 -8 Left 2 ;Output
TEXT 3320 8 Left 2 ;It player( 0V player is not it, 4.5V player is it)
TEXT -512 864 Left 2 ;Modelling button press.
