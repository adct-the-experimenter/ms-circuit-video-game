Version 4
SHEET 1 4184 804
WIRE 768 0 688 0
WIRE 832 0 768 0
WIRE 832 16 832 0
WIRE 880 16 832 16
WIRE 960 32 944 32
WIRE 992 32 960 32
WIRE 880 48 848 48
WIRE 768 80 768 64
WIRE 832 80 768 80
WIRE 848 80 848 48
WIRE 848 80 832 80
WIRE 352 96 304 96
WIRE 528 96 432 96
WIRE 128 128 32 128
WIRE 688 128 688 0
WIRE 768 128 768 80
WIRE 1648 144 1600 144
WIRE 1824 144 1728 144
WIRE 32 160 32 128
WIRE 1216 160 1184 160
WIRE 1344 160 1296 160
WIRE 2880 160 2720 160
WIRE 2192 224 2048 224
WIRE 128 256 128 128
WIRE 176 256 128 256
WIRE 304 256 304 96
WIRE 304 256 256 256
WIRE 384 256 304 256
WIRE 528 272 528 96
WIRE 528 272 448 272
WIRE 592 272 592 208
WIRE 592 272 528 272
WIRE 768 272 768 208
WIRE 768 272 592 272
WIRE 2720 272 2720 160
WIRE 2768 272 2720 272
WIRE 384 288 368 288
WIRE 960 288 960 32
WIRE 1040 288 960 288
WIRE 1184 288 1184 160
WIRE 1184 288 1120 288
WIRE 1232 288 1184 288
WIRE 2048 288 2048 224
WIRE 2080 288 2048 288
WIRE 2880 288 2880 160
WIRE 2880 288 2832 288
WIRE 2928 288 2880 288
WIRE 1344 304 1344 160
WIRE 1344 304 1296 304
WIRE 1392 304 1392 256
WIRE 1392 304 1344 304
WIRE 1472 304 1472 208
WIRE 1600 304 1600 144
WIRE 1600 304 1552 304
WIRE 1680 304 1600 304
WIRE 2192 304 2192 224
WIRE 2192 304 2144 304
WIRE 2448 304 2192 304
WIRE 2592 304 2528 304
WIRE 2768 304 2592 304
WIRE 1232 320 1200 320
WIRE 1824 320 1824 144
WIRE 1824 320 1744 320
WIRE 1920 320 1920 272
WIRE 1920 320 1824 320
WIRE 2000 320 1920 320
WIRE 2080 320 2000 320
WIRE 1680 336 1664 336
WIRE 2000 336 2000 320
WIRE 1200 368 1200 320
WIRE 2448 368 2448 304
WIRE 176 384 112 384
WIRE 320 384 256 384
WIRE 368 384 368 288
WIRE 368 384 320 384
WIRE 2592 384 2592 304
WIRE 320 416 320 384
WIRE 2000 416 2000 400
WIRE -464 432 -464 400
WIRE -288 432 -464 432
WIRE 1392 432 1392 304
WIRE 1472 432 1392 432
WIRE 1616 432 1552 432
WIRE 1664 432 1664 336
WIRE 1664 432 1616 432
WIRE 2256 448 2256 416
WIRE 2400 448 2256 448
WIRE 1616 464 1616 432
WIRE 2528 464 2528 304
WIRE 2528 464 2448 464
WIRE 2592 464 2592 448
WIRE 2256 480 2256 448
WIRE -288 496 -288 432
WIRE -608 576 -608 560
FLAG -608 576 0
FLAG -464 400 joystick_x
FLAG -688 272 0
FLAG -880 192 VCC
FLAG -880 272 0
FLAG -688 192 VEE
FLAG 416 240 VCC
FLAG 416 304 VEE
FLAG 320 496 0
FLAG 112 464 0
FLAG 32 160 joystick_x
FLAG 1392 256 xpos_change
FLAG 592 208 velocity_inv
FLAG 1264 272 VCC
FLAG 1264 336 VEE
FLAG 1200 368 0
FLAG 2800 256 VCC
FLAG 2256 416 sample
FLAG 2592 464 0
FLAG 2112 272 VCC
FLAG 2928 288 xpos
FLAG 2256 560 0
FLAG 1712 288 VCC
FLAG 1712 352 VEE
FLAG 1616 544 0
FLAG 1472 208 xpos
FLAG 1920 272 new_x
FLAG 2800 320 0
FLAG 2112 336 0
FLAG 2000 416 0
FLAG -288 576 0
FLAG 688 208 0
FLAG 912 0 VCC
FLAG 992 32 dir_detect_vel
FLAG 912 64 VEE
DATAFLAG 2448 352 ""
DATAFLAG 2368 448 ""
SYMBOL voltage -608 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value SINE(2.5 2.5 10 0.2)
SYMBOL voltage -688 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value -5
SYMBOL voltage -880 176 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL Opamps\\UniversalOpamp2 416 272 R0
SYMATTR InstName U1
SYMBOL res 448 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 304 400 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 272 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 272 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL voltage 112 368 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 2.5
SYMBOL Opamps\\UniversalOpamp2 1264 304 R0
SYMATTR InstName U3
SYMBOL res 1136 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 1312 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 5k
SYMBOL Opamps\\UniversalOpamp2 2800 288 R0
SYMATTR InstName U4
SYMBOL cap 2576 384 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL nmos 2400 368 R0
SYMATTR InstName M1
SYMATTR Value RSJ400N10
SYMBOL Opamps\\UniversalOpamp2 2112 304 R0
SYMATTR InstName U5
SYMBOL voltage 2256 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value SINE(0 2.5 120)
SYMBOL Opamps\\UniversalOpamp2 1712 320 R0
SYMATTR InstName U6
SYMBOL res 1744 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 1600 448 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 1568 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res 1568 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL diode 2016 400 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL voltage -288 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 5 0.3 0.25 0.25)
SYMBOL Opamps\\UniversalOpamp2 912 32 R0
SYMATTR InstName U7
SYMBOL res 752 112 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL res 672 112 R0
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL diode 752 0 R0
SYMATTR InstName D2
SYMATTR Value 1N914
SYMBOL diode 848 80 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N914
TEXT -624 56 Left 2 ;joystick controls direction i.e. negative, positive, or zero.
TEXT -576 224 Left 2 !.tran 0 2 0 0.1
TEXT 2400 224 Left 2 ;Sample/hold control
TEXT 1856 32 Left 2 ;Position is limited to a range of 0V to 5V. Therefore clipping negative portion of signal representing new x position.
